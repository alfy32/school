<!DOCTYPE html>
<html>
<head>
  <title>Mobile Mazes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
</head>
<body>
  <canvas id="maze-canvas" style="width:100%;"></canvas>

  <script type="text/javascript" src="script.js"></script>
  <script type="text/javascript">
    var width = window.location.hash.split('/')[2];
    var height = window.location.hash.split('/')[3];

    MazeSolver.generateMobile(width, height);

    var canvas = document.getElementById('maze-canvas');

    var width = window.innerWidth;
    var height = window.innerHeight;

    function getDirection(x,y) {
      var leftOfBackslash = isLeft({x:0, y:0}, {x:width-1, y:height-1}, {x:x,y:y});
      var leftOfForwardSlash = isLeft({x:0, y:height-1}, {x:width-1, y:0}, {x:x,y:y});

      if(leftOfBackslash && leftOfForwardSlash) return 'DOWN';
      if(leftOfBackslash && !leftOfForwardSlash) return 'LEFT';
      if(!leftOfBackslash && !leftOfForwardSlash) return 'UP';
      if(!leftOfBackslash && leftOfForwardSlash) return 'RIGHT';
    }

    function isLeft(a,b,c) {
      return ((b.x - a.x)*(c.y - a.y) - (b.y - a.y)*(c.x - a.x)) > 0;
    }

    window.addEventListener('touchstart', touch, false);

    function touch(e) {
      var touch = e.targetTouches[0];

      console.log(touch.clientX);

      var x = touch.clientX;
      var y = touch.clientY;

      MazeSolver.moveMobile(getDirection(x,y));

      console.log(x,y, width, height, getDirection(x,y));
    }


  </script>
</body>
</html>